<script src="../lib/jquery-1.6.1.min.js" type="text/javascript"></script>
<script src="../lib/jquery.tmpl.min.js" type="text/javascript"></script>
<script src="analytics.js" type="text/javascript"></script>
<link href="styles.css" rel="Stylesheet" type="text/css"/>

<script id="template" type="text/x-jquery-tmpl">
	<ul>
		{{each(i, build) builds}}
		<li class="${build.status}">
		<a href="${build.webUrl}" title="${build.status}">
			<span class="icon">&nbsp;</span>
			<span class="project">${build.projectName}</span>
			<span class="configuration">${build.name}</span>
			<span class="buildnumber">${build.lastBuildNumber}</span>
			<span class="description">${build.description}</span>
			</a>
		</li>
		{{/each}}
	</ul>
</script>

<div id="status"></div>

<script type="text/javascript">
	$('#status').empty();
	$('#template')
		.tmpl({builds:chrome.extension.getBackgroundPage().builds})
		.appendTo('#status');
	$('#status li a').click(function(event){
		event.preventDefault();
		chrome.tabs.create({url:$(this).attr('href')});
	});
</script>
